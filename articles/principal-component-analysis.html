<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="stylo2gg">
<title>Principal component analysis • stylo2gg</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Principal component analysis">
<meta property="og:description" content="stylo2gg">
<meta property="og:image" content="https://jmclawson.github.io/stylo2gg/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">stylo2gg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/stylo2gg.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/hierarchical-clustering.html">hierarchical-clustering</a>
    <a class="dropdown-item" href="../articles/principal-component-analysis.html">Principal component analysis</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Principal component analysis</h1>
            
      
      
      <div class="d-none name"><code>principal-component-analysis.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jmclawson.github.io/stylo2gg/">stylo2gg</a></span><span class="op">)</span></span></code></pre></div>
<p>One common method for understanding stylometric relationships among
texts is to visualize a principal component analysis in a
two-dimensional space. To do this, typically the first principal
component is projected on the X-axis, and the second principal component
is projected on the Y-axis. In addition to measuring word frequencies
among all documents in a corpus, the stylo package shows a visualization
of such an analysis, projecting many documents into a chart showing
these kinds of coordinates. As an example, here’s the code and output
showing similarities among the eighty-five <em>Federalist Papers</em>,
originally published pseudonymously in 1788:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/computationalstylistics/stylo" class="external-link">stylo</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">federalist_mfw</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/stylo/man/stylo.html" class="external-link">stylo</a></span><span class="op">(</span>gui <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        corpus.dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/federalist"</span>, package <span class="op">=</span> <span class="st">"stylo2gg"</span><span class="op">)</span>,</span>
<span>        analysis.type <span class="op">=</span> <span class="st">"PCR"</span>,</span>
<span>        pca.visual.flavour <span class="op">=</span> <span class="st">"symbols"</span>,</span>
<span>        analyzed.features <span class="op">=</span> <span class="st">"w"</span>,</span>
<span>        ngram.size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>        display.on.screen <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        sampling <span class="op">=</span> <span class="st">"no.sampling"</span>,</span>
<span>        culling.max <span class="op">=</span> <span class="fl">75</span>,</span>
<span>        culling.min <span class="op">=</span> <span class="fl">75</span>,</span>
<span>        mfw.min <span class="op">=</span> <span class="fl">900</span>,</span>
<span>        mfw.max <span class="op">=</span> <span class="fl">900</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/fig-introstylo2-1.png" alt="This visualization places each part by its frequencies of 120 of the most frequent words—chosen from among words appearing in at least three-fourths of all papers The chart shows that the texts whose authorship had once been in question, shown here with red Xs, have frequency distributions most similar to those by James Madison, shown here with green crosses." width="700"><p class="caption">
This visualization places each part by its frequencies of 120 of the
most frequent words—chosen from among words appearing in at least
three-fourths of all papers The chart shows that the texts whose
authorship had once been in question, shown here with red Xs, have
frequency distributions most similar to those by James Madison, shown
here with green crosses.
</p>
</div>
<p>As the figure suggests, most of these documents were eventually known
to be written by Alexander Hamilton, John Jay, and James Madison, shown
categorized here by their last names. Although most had known
authorship, some were disputed or had joint authorship, shown here by
the “NA” category. From their placement along the X- and Y-axes, the
disputed papers seem closest in style to those by James Madison. The
analysis here uses some of the same measures Frederick Mosteller and
David Wallace famously used in their 1963 study, and it arrives at
similar conclusions, but the ease and usefulness of tools like stylo
means that preparing this quick visualization demands far less time and
sweat.</p>
<p>In saving this output to a named object <code>federalist_mfw</code>,
stylo makes it possible to access the frequency tables to study them in
other ways. By taking advantage of this object, the stylo2gg package
makes it very easy to try out different visualizations. Without any
changed parameters, the <code><a href="../reference/stylo2gg.html">stylo2gg()</a></code> function will import
defaults from the call used to run <code><a href="https://rdrr.io/pkg/stylo/man/stylo.html" class="external-link">stylo()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/unnamed-chunk-4-1.png" alt="Using selected `ggplot2` defaults for shapes and colors, the visualization created by `stylo2gg` nevertheless shows the same patterns of style, presenting a figure drawn from the same principal components. Here, the disputed papers are marked by purple diamonds, and they seem closest in style to the parts known to be by Madison, marked by blue Xs." width="700"><p class="caption">
Using selected <code>ggplot2</code> defaults for shapes and colors, the
visualization created by <code>stylo2gg</code> nevertheless shows the
same patterns of style, presenting a figure drawn from the same
principal components. Here, the disputed papers are marked by purple
diamonds, and they seem closest in style to the parts known to be by
Madison, marked by blue Xs.
</p>
</div>
<p>In the simplest conversion of a stylo object, <code><a href="../reference/stylo2gg.html">stylo2gg()</a></code>
tries as closely as is reasonable to recreate the analytic and aesthetic
decisions that went into the creation of that object, creating a chart
comparing first and second principal components with axes marked by
each’s distributed percentage of variation; the caption shows the
feature count, feature type, culling percentage, and matrix type; and
the legend is shown at the top of the graph. As shown, stylo2gg even
honors the choice from the original <code><a href="https://rdrr.io/pkg/stylo/man/stylo.html" class="external-link">stylo()</a></code> call to show
principal components derived from a correlation matrix, although other
options are available.</p>
<div class="section level3">
<h3 id="labeling-points">Labeling points<a class="anchor" aria-label="anchor" href="#labeling-points"></a>
</h3>
<p>From here, it’s easy to change options to clarify an analysis without
having to call <code><a href="https://rdrr.io/pkg/stylo/man/stylo.html" class="external-link">stylo()</a></code> again. Files prepared for stylo
typically follow a specific naming convention: in the case of this
corpus, Federalist No. 10 is prepared in a text file called
<code>Madison_10.txt</code>, indicating metadata offset by underscores,
with the author name coming first and the title or textual marker coming
next. The stylo package already uses the first part of this metadata to
apply color to different authors or class groupings of texts. Likewise,
stylo2gg follows suit, but it can also choose among these aspects to
apply a label. For this chart, it might make sense to replace symbols
with the number of each paper it represents:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>shapes <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>           labeling <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/unnamed-chunk-5-1.png" alt="The option `shapes=FALSE` turns off the symbols that would otherwise also appear; simultaneously, the option `labeling=2` selects the second metadata element from corpus filenames---in this case the number of the specific paper---as a label for the visualization. When a chosen label consists of nothing but numbers, as it does here, the legend key changes to a number sign. If a label includes any other characters, it becomes the letter 'a', ggplot2's default key for showing color of text." width="700"><p class="caption">
The option <code>shapes=FALSE</code> turns off the symbols that would
otherwise also appear; simultaneously, the option
<code>labeling=2</code> selects the second metadata element from corpus
filenames—in this case the number of the specific paper—as a label for
the visualization. When a chosen label consists of nothing but numbers,
as it does here, the legend key changes to a number sign. If a label
includes any other characters, it becomes the letter ‘a’, ggplot2’s
default key for showing color of text.
</p>
</div>
<p>Displaying these labels makes it possible further to study Mosteller
and Wallace’s findings on the papers jointly authored by Madison and
Hamilton: in this principal components analysis of 120 most frequent
words, papers 18, 19, and 20 seem closer in style to Madison than to
Hamilton, and Mosteller and Wallace’s work using different techniques
seems to show the same finding for two of these three papers, with mixed
results for number 20.</p>
<p>If it were preferred instead to label the author names, we could set
<code>labeling=1</code>. If we wanted to show everything, replicating
stylo’s option <code>pca.visual.flavour="labels"</code>, we can set
<code>labeling=0</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>shapes <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>           labeling <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/unnamed-chunk-6-1.png" alt="The option `labeling=0` shows entire file names for items in the corpus, excepting the extension. This option also turns off the legend by default, since that information is already indicated." width="700"><p class="caption">
The option <code>labeling=0</code> shows entire file names for items in
the corpus, excepting the extension. This option also turns off the
legend by default, since that information is already indicated.
</p>
</div>
</div>
<div class="section level3">
<h3 id="highlighting-groups">Highlighting groups<a class="anchor" aria-label="anchor" href="#highlighting-groups"></a>
</h3>
<p>In addition to recreating some of the visualizations offered by
stylo, stylo2gg takes advantage of ggplot2’s extensibility to offer
additional options. If, for instance, we want to emphasize the overlap
of style among the disputed papers and those by Madison, it’s easy to
show a highlight of the 3rd and 4th categories of texts, corresponding
to their ordering on the legend:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>shapes <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>           labeling <span class="op">=</span> <span class="fl">2</span>,</span>
<span>           highlight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/unnamed-chunk-7-1.png" alt="The `highlight` option accepts numbers corresponding to categories shown on the legend. Highlights on principal components charts can include 1 or more categories, but highlights for hierarchical clusters can only accept one category. To draw these loops around points on a scatterplot, stylogg relies on the &lt;a href='https://cran.r-project.org/web/packages/ggalt/index.html'&gt;ggalt&lt;/a&gt;
package.” width=“700” /&gt;
&lt;p class=" caption>
The <code>highlight</code> option accepts numbers corresponding to
categories shown on the legend. Highlights on principal components
charts can include 1 or more categories, but highlights for hierarchical
clusters can only accept one category. To draw these loops around points
on a scatterplot, stylogg relies on the
<a href="https://cran.r-project.org/web/packages/ggalt/index.html" class="external-link">ggalt</a>
package.

</div>
</div>
<div class="section level3">
<h3 id="overlay-loadings">Overlay loadings<a class="anchor" aria-label="anchor" href="#overlay-loadings"></a>
</h3>
<p>With these texts charted, we might want to communicate something
about the underlying word frequencies that inform their placement. The
<code>top.loadings</code> option allows us to show a number of
words—ordered from the most frequent to the least frequent—overlaid with
scaled vectors as alternative axes on the principal components
chart:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>shapes <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>           labeling <span class="op">=</span> <span class="fl">2</span>,</span>
<span>           highlight <span class="op">=</span> <span class="fl">4</span>,</span>
<span>           top.loadings <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/unnamed-chunk-8-1.png" alt="Set `top.loadings` to a number `n` to overlay loadings for the most frequent words, from 1 to `n`. This chart shows loadings and scaled vectors for the 10 most frequent words." width="700"><p class="caption">
Set <code>top.loadings</code> to a number <code>n</code> to overlay
loadings for the most frequent words, from 1 to <code>n</code>. This
chart shows loadings and scaled vectors for the 10 most frequent words.
</p>
</div>
<p>Alternatively, show loadings by nearest principal components, by the
middle point of a given category, by a specific word, or all of the
above:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>shapes <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>           labeling <span class="op">=</span> <span class="fl">2</span>,</span>
<span>           select.loadings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4</span>, <span class="op">-</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>                                  <span class="st">"Madison"</span>,</span>
<span>                                  <span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">call</a></span><span class="op">(</span><span class="st">"word"</span>, </span>
<span>                                       <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"the"</span>, <span class="st">"a"</span>, <span class="st">"an"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/unnamed-chunk-9-1.png" alt="In a list form, the `select.loadings` option accepts coordinates, category names, and words. Here, `c(-4,-6)` indicates that the code should find the loading nearest to -4 on the first principal component and -6 on the second principal component; *Madison* indicates that the function should find coordinates at the middle of papers by Madison and then find the loading nearest those coordinates; and three articles *the*, *a*, and *an* indicate, using `call('word')`, that these specific loadings should be shown." width="700"><p class="caption">
In a list form, the <code>select.loadings</code> option accepts
coordinates, category names, and words. Here, <code>c(-4,-6)</code>
indicates that the code should find the loading nearest to -4 on the
first principal component and -6 on the second principal component;
<em>Madison</em> indicates that the function should find coordinates at
the middle of papers by Madison and then find the loading nearest those
coordinates; and three articles <em>the</em>, <em>a</em>, and
<em>an</em> indicate, using <code>call('word')</code>, that these
specific loadings should be shown.
</p>
</div>
<p>These words and lines are gray by default. As of fall 2022, other
colors can be specified, and the letters can be converted to uppercase
for legibility:<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;The option to choose the color for loadings was
requested by Josef Ginnerskov via Stylo2gg’s issue tracker on GitHub: &lt;a href="https://github.com/jmclawson/stylo2gg/issues/2" class="external-link"&gt;github.com/jmclawson/stylo2gg/issues/2&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>top.loadings <span class="op">=</span> <span class="fl">6</span>,</span>
<span>           loadings.line.color <span class="op">=</span> <span class="st">"blue"</span>,</span>
<span>           loadings.word.color <span class="op">=</span> <span class="st">"navy"</span>,</span>
<span>           loadings.upper <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/unnamed-chunk-10-1.png" alt="Set `loadings.line.color` and `loadings.word.color` to change the coloring of loadings. Optionally toggle `loadings.upper` to show uppercase letters, or set `loadings.spacer` to define the character shown in lieu of spaces when measuring bigrams and other n-grams." width="700"><p class="caption">
Set <code>loadings.line.color</code> and
<code>loadings.word.color</code> to change the coloring of loadings.
Optionally toggle <code>loadings.upper</code> to show uppercase letters,
or set <code>loadings.spacer</code> to define the character shown in
lieu of spaces when measuring bigrams and other n-grams.
</p>
</div>
</div>
<div class="section level3">
<h3 id="narrowing-things-down">Narrowing things down<a class="anchor" aria-label="anchor" href="#narrowing-things-down"></a>
</h3>
<p>One beauty of using a saved frequency list is that it becomes
possible to select a subset from the data to inform an analysis. By
counting all words that appear in 75% of the texts for this analysis,
stylo prepares a frequency table of 120 words. From there, stylo2gg can
select a subset of these using the <code>features</code> option, for
selecting a specific vector of words, or the <code>num.features</code>
option, for automatically selecting a given number of the most frequent
words.</p>
<p>One might, for instance, hypothesize that words shorter than four
characters are sufficient to differentiate style in these English
texts.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Mosteller and Wallace write of being surprised that
“high-frequency function words did the best job” (304), and their
findings of this tendency in English texts have been confirmed many
times over since then.&lt;/p&gt;"><sup>2</sup></a>
Using the <code>features</code> option, this hypothesis can be tested by
choosing a smaller subset from the full list of 120 most frequent
words:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">short_words</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">federalist_mfw</span><span class="op">$</span><span class="va">features.actually.used</span><span class="op">[</span><span class="va">federalist_mfw</span><span class="op">$</span><span class="va">features.actually.used</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">4</span><span class="op">]</span></span>
<span></span>
<span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>shapes <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>           features <span class="op">=</span> <span class="va">short_words</span>,</span>
<span>           top.loadings <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/unnamed-chunk-11-1.png" alt="Selecting a subset of features will also cause the caption to update from *120 MFW* to *42 W,* reflecting the changed number of features and the type: they are no longer most frequent words (MFW) but are now just words (W)." width="700"><p class="caption">
Selecting a subset of features will also cause the caption to update
from <em>120 MFW</em> to <em>42 W,</em> reflecting the changed number of
features and the type: they are no longer most frequent words (MFW) but
are now just words (W).
</p>
</div>
<p>Results here suggest that the hypothesis would have been mostly
correct, as it is possible still to see patterns in clusters. But
limiting an analysis solely to these shorter words makes it harder to
differentiate the styles of Hamilton and Madison. Interestingly, Jay’s
style remains distinct in this consideration. Interesting, too, the
overlay of the top ten loadings shows that papers with positive values
in the second principal component in this chart—above a center line—are
strongest in first-person plural features like “us” and “our” and “we.”
And perhaps most interesting, just quickly looking at the top ten
loadings suggests that Hamilton’s papers may have been less likely to
use past-tense constructions like “was” and “had,” preferring infinitive
forms marked by “to” and “be.”</p>
<p>If instead of manually selecting features one preferred to choose a
subset by number, the <code>num.features</code> option makes it possible
to do so.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>shapes <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>           labeling <span class="op">=</span> <span class="va">federalist_mfw</span><span class="op">$</span><span class="va">table.with.all.freqs</span> <span class="op">|&gt;</span> </span>
<span>             <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>             <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html" class="external-link">str_extract</a></span><span class="op">(</span><span class="st">"^[A-Z]"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>             <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"."</span>,</span>
<span>                    <span class="va">federalist_mfw</span><span class="op">$</span><span class="va">table.with.all.freqs</span> <span class="op">|&gt;</span> </span>
<span>                      <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>                      <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html" class="external-link">str_extract</a></span><span class="op">(</span><span class="st">"[0-9]+"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>           legend <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           highlight <span class="op">=</span> <span class="fl">2</span>,</span>
<span>           num.features <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/unnamed-chunk-12-1.png" alt="Setting `num.features` to 50 will limit a chart to the 50 most frequent words. The caption updates to reflect this choice." width="700"><p class="caption">
Setting <code>num.features</code> to 50 will limit a chart to the 50
most frequent words. The caption updates to reflect this choice.
</p>
</div>
<p>The code for this last visualization also shows that, in addition to
a number corresponding to the metadata from a filename, the
<code>labeling</code> option can also accept a vector of the same length
as the number of texts. Here, the result shows the first letter of each
author category, a dot, and the text’s corresponding number;
additionally, the legend has been turned off by setting its option to
<code>FALSE</code>.</p>
</div>
<div class="section level3">
<h3 id="emphasizing-with-contrast">Emphasizing with contrast<a class="anchor" aria-label="anchor" href="#emphasizing-with-contrast"></a>
</h3>
<p>By default, stylo2gg uses symbols that ought to be distinguishable
when printing in gray scale. Use the <code>black=</code> option with the
number of a given category to further optimize for gray-scale printing
or to employ contrast to emphasize a particular group.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>black <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<p><img src="principal-component-analysis_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="withholding-texts-from-a-pca-projection">Withholding texts from a PCA projection<a class="anchor" aria-label="anchor" href="#withholding-texts-from-a-pca-projection"></a>
</h3>
<p>In cases of disputed authorship, it can be desirable to understand
relationships among known texts and authors before considering those of
unknown provenance. New in version 1.0, stylo2gg’s
<code>withholding</code> parameter allows for certain classes to be left
out from defining the base projection of a principal components
analysis. These texts are then projected into a space they did not help
define:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>withholding <span class="op">=</span> <span class="st">"NA"</span>,</span>
<span>           highlight <span class="op">=</span> <span class="fl">3</span>,</span>
<span>           black <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/unnamed-chunk-14-1.png" alt="Defining `withholding` makes it possible to ignore certain classes of texts from the underlying projection." width="700"><p class="caption">
Defining <code>withholding</code> makes it possible to ignore certain
classes of texts from the underlying projection.
</p>
</div>
</div>
<div class="section level3">
<h3 id="choosing-principal-components">Choosing principal components<a class="anchor" aria-label="anchor" href="#choosing-principal-components"></a>
</h3>
<p>Follosing stylo’s lead, stylo2gg shows the first two principal
components by default, but it may often be necessary to show more.
Introduced earlier in 2023, the <code>pc.x</code> and <code>pc.y</code>
parameters make it possible to map other components to the X-axis and
Y-axis, simultaneously updating axis labels to indicate components and
variance.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;This feature was requested by Josef Ginnerskov via
Stylo2gg’s issue tracker on GitHub: &lt;a href="https://github.com/jmclawson/stylo2gg/issues/4" class="external-link"&gt;github.com/jmclawson/stylo2gg/issues/4&lt;/a&gt;&lt;/p&gt;'><sup>3</sup></a></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>pc.x <span class="op">=</span> <span class="fl">3</span>, pc.y <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<p><img src="principal-component-analysis_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="other-options-for-principal-components-analysis">Other options for principal components analysis<a class="anchor" aria-label="anchor" href="#other-options-for-principal-components-analysis"></a>
</h3>
<p>In addition to the options shown above, principal components analysis
can be directed with a covariance matrix (<code>viz="PCV"</code>) or
correlation matrix (<code>viz="PCV"</code>), and a given chart can be
flipped horizontally (with <code>invert.x=TRUE</code>) or vertically
(<code>invert.y=TRUE</code>). Additionally, the caption below the chart
can be removed using <code>caption=FALSE</code>. Alternatively, setting
<code>viz="pca"</code> will choose a minimal set of changes from which
one might choose to build up selected additions: turning on captions
(<code>caption=TRUE</code>), moving the legend or calling on other
Ggplot2 commands, adding a title (using
<code>title="Title Goes Here"</code>), or other matters.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">federalist_mfw</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/rename_category.html">rename_category</a></span><span class="op">(</span><span class="st">"NA"</span>, <span class="st">"unknown"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>viz <span class="op">=</span> <span class="st">"pca"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_shape_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fl">15</span><span class="op">:</span><span class="fl">18</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_size_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8.5</span>, <span class="fl">9</span>, <span class="fl">7</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_alpha_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>, <span class="st">"#009E73"</span>, <span class="st">"#CC79A7"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Larger, solid points can make relationships easier to understand."</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Setting alpha values is a good idea when solid points overlap."</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title.position <span class="op">=</span> <span class="st">"plot"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="principal-component-analysis_files/figure-html/unnamed-chunk-16-1.png" alt="Setting `viz='pca'` rather than the stylo-flavored `viz='PCR'` or `viz='PCV'` prepares a minimal visualization of a principal components analysis derived from a correlation matrix. This might be a good setting to use if further customizing the figure by adding refinements provided by ggplot2 functions---at which point it will become necessary to load that package explicitly. The example here also shows the utility of the stylo2gg function for adjusting labels, `rename_category()`." width="700"><p class="caption">
Setting <code>viz='pca'</code> rather than the stylo-flavored
<code>viz='PCR'</code> or <code>viz='PCV'</code> prepares a minimal
visualization of a principal components analysis derived from a
correlation matrix. This might be a good setting to use if further
customizing the figure by adding refinements provided by ggplot2
functions—at which point it will become necessary to load that package
explicitly. The example here also shows the utility of the stylo2gg
function for adjusting labels, <code><a href="../reference/rename_category.html">rename_category()</a></code>.
</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by James M. Clawson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
