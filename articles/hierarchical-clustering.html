<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="stylo2gg">
<title>hierarchical-clustering • stylo2gg</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="hierarchical-clustering">
<meta property="og:description" content="stylo2gg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">stylo2gg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/stylo2gg.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/hierarchical-clustering.html">hierarchical-clustering</a>
    <a class="dropdown-item" href="../articles/principal-component-analysis.html">Principal component analysis</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>hierarchical-clustering</h1>
            
      
      
      <div class="d-none name"><code>hierarchical-clustering.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jmclawson.github.io/stylo2gg/">stylo2gg</a></span><span class="op">)</span></span></code></pre></div>
<p>In addition to two-dimensional relationships with principal
components, stylo can also show a dendrogram for cluster analysis,
showing texts’ relationships based on their distance to each other. The
resulting dendrogram shows texts in branches splitting off from one
another at points that correspond to distance. In the orientation shown
below, when two texts or groups of texts seem to have greater stylistic
similarity, their branches will join nearer to the right side of the
chart—nearer to a distance of zero. As the texts show greater
dissimilarity, their branches will connect closer to the left side of
the chart.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw_hc</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">stylo</span><span class="op">(</span>gui <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      corpus.dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/federalist"</span>, package <span class="op">=</span> <span class="st">"stylo2gg"</span><span class="op">)</span>,</span>
<span>      custom.graph.title <span class="op">=</span> <span class="st">"Federalist Papers"</span>,</span>
<span>      analysis.type <span class="op">=</span> <span class="st">"CA"</span>,</span>
<span>      analyzed.features <span class="op">=</span> <span class="st">"w"</span>,</span>
<span>      ngram.size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      display.on.screen <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      sampling <span class="op">=</span> <span class="st">"no.sampling"</span>,</span>
<span>      culling.max <span class="op">=</span> <span class="fl">75</span>,</span>
<span>      culling.min <span class="op">=</span> <span class="fl">75</span>,</span>
<span>      mfw.min <span class="op">=</span> <span class="fl">900</span>,</span>
<span>      mfw.max <span class="op">=</span> <span class="fl">900</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="hierarchical-clustering_files/figure-html/fig-stylo_hc2-1.png" alt="Dendrogram of hierarchical clusters, prepared by stylo." width="700"><p class="caption">
Dendrogram of hierarchical clusters, prepared by stylo.
</p>
</div>
<p>Using this <code>federalist_mfw_hc</code> object, stylo2gg will
create a similar cluster analysis:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw_hc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="hierarchical-clustering_files/figure-html/unnamed-chunk-4-1.png" alt="To prepare dendrograms for display, stylo2gg uses &lt;a href='https://cran.r-project.org/web/packages/dendextend/index.html'&gt;dendextend&lt;/a&gt;.”
width=“700” /&gt;
&lt;p class=" caption>
To prepare dendrograms for display, stylo2gg uses
<a href="https://cran.r-project.org/web/packages/dendextend/index.html" class="external-link">dendextend</a>.

</div>
<p>The addition of symbols to the chart allows for interpretability when
printing, though these can be turned off with <code>shapes=FALSE</code>,
as they can when showing PCA. In fact, many of the same options that
apply to a visualization of principal components will also apply to
cluster analysis:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">federalist_mfw_hc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>viz <span class="op">=</span> <span class="st">"CA"</span>,</span>
<span>           labeling <span class="op">=</span> <span class="fl">2</span>,</span>
<span>           highlight <span class="op">=</span> <span class="fl">4</span>,</span>
<span>           black <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_shape_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fl">15</span><span class="op">:</span><span class="fl">18</span><span class="op">)</span></span></code></pre></div>
<p><img src="hierarchical-clustering_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="section level3">
<h3 id="options-for-distance-and-linkage">Options for distance and linkage<a class="anchor" aria-label="anchor" href="#options-for-distance-and-linkage"></a>
</h3>
<p>If they are available, stylo2gg will adopt stylo’s settings for
measuring distances and finding groups. If they’re not available, it
will default to finding distance using the Burrows delta
(<code>distance.measure="delta"</code>) and grouping texts using the
Ward1 method (<code>linkage="ward.D"</code>). Many other options native
to stylo and to R can be set for these.</p>
</div>
<div class="section level3">
<h3 id="minimal-display">Minimal display<a class="anchor" aria-label="anchor" href="#minimal-display"></a>
</h3>
<p>When setting <code>viz="CA"</code> or importing directly from a stylo
analysis with the option set <code>analysis.type="CA"</code>, stylo2gg
will try to approximate the aesthetics shown by stylo, displaying an
axis of distance and an explanatory caption. These options may not be
desired since relative distances are already meaningful without the
axis. To show a minimal dendrogram, choose the option
<code>viz="hc"</code> (for hierarchical clustering)</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw_hc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>viz <span class="op">=</span> <span class="st">"hc"</span>,</span>
<span>           shapes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           linkage <span class="op">=</span> <span class="st">"ward.D2"</span>,</span>
<span>           distance <span class="op">=</span> <span class="st">"euclidean"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expand_limits.html" class="external-link">expand_limits</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="hierarchical-clustering_files/figure-html/unnamed-chunk-6-1.png" alt="This minimal dendrogram shows clusters using the Ward2 method based on Euclidean distances. If labels get clipped at the edge, consider expanding the limits using the added function shown here." width="700"><p class="caption">
This minimal dendrogram shows clusters using the Ward2 method based on
Euclidean distances. If labels get clipped at the edge, consider
expanding the limits using the added function shown here.
</p>
</div>
</div>
<div class="section level3">
<h3 id="highlighting-results-with-boxes">Highlighting results with boxes<a class="anchor" aria-label="anchor" href="#highlighting-results-with-boxes"></a>
</h3>
<p>As shown above, setting the <code>highlight</code> option to a
category’s number will draw a box around the branches containing this
category. Unlike with principal components visualization, only one
category can be highlighted at a time on a dendrogram; nevertheless,
there are a few more options available to tweak this highlighting.</p>
<p>By default, stylo2gg will draw a single box, even if texts belonging
to a category are distributed unevenly.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw_hc</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>viz <span class="op">=</span> <span class="st">"hc"</span>,</span>
<span>           shapes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           highlight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>           highlight.nudge <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>           linkage <span class="op">=</span> <span class="st">"ward.D2"</span>,</span>
<span>           distance <span class="op">=</span> <span class="st">"euclidean"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expand_limits.html" class="external-link">expand_limits</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="hierarchical-clustering_files/figure-html/unnamed-chunk-7-1.png" alt="Drawing a highlight box when texts are distributed widely isn't very useful. The `highlight.nudge` option here moves the box's edge to avoid clipping labels; whether it is needed might depend on local installations." width="700"><p class="caption">
Drawing a highlight box when texts are distributed widely isn’t very
useful. The <code>highlight.nudge</code> option here moves the box’s
edge to avoid clipping labels; whether it is needed might depend on
local installations.
</p>
</div>
<p>Setting <code>highlight.single=FALSE</code> will instead draw
multiple boxes while consolidating any contiguous branches:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw_hc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>viz <span class="op">=</span> <span class="st">"hc"</span>,</span>
<span>           shapes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           highlight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>           highlight.nudge <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>           highlight.single <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           linkage <span class="op">=</span> <span class="st">"ward.D2"</span>,</span>
<span>           distance <span class="op">=</span> <span class="st">"euclidean"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expand_limits.html" class="external-link">expand_limits</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<p><img src="hierarchical-clustering_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>As an alternative to categorical highlighting on a dendrogram,
stylo2gg can draw boxes indicated by each text’s index number from the
bottom, with the lowest text being number 1, the second-lowest text
number 2, etc:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw_hc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>viz <span class="op">=</span> <span class="st">"hc"</span>,</span>
<span>           shapes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           highlight.box <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span><span class="op">:</span><span class="fl">19</span>, <span class="fl">23</span><span class="op">:</span><span class="fl">24</span>, <span class="fl">29</span><span class="op">:</span><span class="fl">63</span>, <span class="fl">84</span><span class="op">:</span><span class="fl">85</span><span class="op">)</span>,</span>
<span>           highlight.nudge <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>           linkage <span class="op">=</span> <span class="st">"ward.D2"</span>,</span>
<span>           distance <span class="op">=</span> <span class="st">"euclidean"</span>,</span>
<span>           show.zero <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="hierarchical-clustering_files/figure-html/unnamed-chunk-9-1.png" alt="Manually indicate groupings to highlight using the `highlight.box` option. To aid in the counting, set `count.labels=TRUE`." width="700"><p class="caption">
Manually indicate groupings to highlight using the
<code>highlight.box</code> option. To aid in the counting, set
<code>count.labels=TRUE</code>.
</p>
</div>
</div>
<div class="section level3">
<h3 id="vertical-dendrograms">Vertical dendrograms<a class="anchor" aria-label="anchor" href="#vertical-dendrograms"></a>
</h3>
<p>Finally, set <code>horiz=FALSE</code> to display the cluster analysis
vertically instead of horizontally:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">federalist_mfw_hc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/stylo2gg.html">stylo2gg</a></span><span class="op">(</span>viz <span class="op">=</span> <span class="st">"CA"</span>, horiz <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span></span></code></pre></div>
<p><img src="hierarchical-clustering_files/figure-html/unnamed-chunk-10-1.png" width="1056"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by James M. Clawson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
